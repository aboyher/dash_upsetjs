/*! For license information please see dash_upsetjs.min.js.LICENSE.txt */
window.dash_upsetjs=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r,a=function(){var e=document.currentScript;if(!e){for(var t=document.getElementsByTagName("script"),n=[],r=0;r<t.length;r++)n.push(t[r]);e=(n=n.filter((function(e){return!e.async&&!e.text&&!e.textContent}))).slice(-1)[0]}return e};if(Object.defineProperty(n,"p",{get:(r=a().src.split("/").slice(0,-1).join("/")+"/",function(){return r})}),"undefined"!=typeof jsonpScriptSrc){var s=jsonpScriptSrc;jsonpScriptSrc=function(e){var t=function(e){return/\/_dash-component-suites\//.test(e.src)}(a()),n=s(e);if(!t)return n;var r=n.split("/"),o=r.slice(-1)[0].split(".");return o.splice(1,0,"v0_0_1m1631733287"),r.splice(-1,1,o.join(".")),r.join("/")}}return n(n.s=3)}([function(e,t){e.exports=window.React},function(e,t){e.exports=window.PropTypes},function(e,t,n){var r,a=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function a(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var n=s._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,(function(n){return a(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":s._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),r=0,a=t.length;r<a;r++){var o=t.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(t){if(null==t)return s.decompress(t);for(var n=new Array(t.length/2),r=0,a=n.length;r<a;r++)n[r]=256*t[2*r]+t[2*r+1];var o=[];return n.forEach((function(t){o.push(e(t))})),s.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,(function(t){return a(n,e.charAt(t))})))},compress:function(t){return s._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,a,s,o={},i={},l="",c="",u="",d=2,m=3,f=2,p=[],y=0,h=0;for(s=0;s<e.length;s+=1)if(l=e.charAt(s),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=m++,i[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)y<<=1,h==t-1?(h=0,p.push(n(y)),y=0):h++;for(a=u.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1}else{for(a=1,r=0;r<f;r++)y=y<<1|a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1}0==--d&&(d=Math.pow(2,f),f++),delete i[u]}else for(a=o[u],r=0;r<f;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1;0==--d&&(d=Math.pow(2,f),f++),o[c]=m++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)y<<=1,h==t-1?(h=0,p.push(n(y)),y=0):h++;for(a=u.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1}else{for(a=1,r=0;r<f;r++)y=y<<1|a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a=0;for(a=u.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1}0==--d&&(d=Math.pow(2,f),f++),delete i[u]}else for(a=o[u],r=0;r<f;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(a=2,r=0;r<f;r++)y=y<<1|1&a,h==t-1?(h=0,p.push(n(y)),y=0):h++,a>>=1;for(;;){if(y<<=1,h==t-1){p.push(n(y));break}h++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var a,s,o,i,l,c,u,d=[],m=4,f=4,p=3,y="",h=[],g={val:r(0),position:n,index:1};for(a=0;a<3;a+=1)d[a]=a;for(o=0,l=Math.pow(2,2),c=1;c!=l;)i=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),o|=(i>0?1:0)*c,c<<=1;switch(o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)i=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),o|=(i>0?1:0)*c,c<<=1;u=e(o);break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)i=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),o|=(i>0?1:0)*c,c<<=1;u=e(o);break;case 2:return""}for(d[3]=u,s=u,h.push(u);;){if(g.index>t)return"";for(o=0,l=Math.pow(2,p),c=1;c!=l;)i=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),o|=(i>0?1:0)*c,c<<=1;switch(u=o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)i=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),o|=(i>0?1:0)*c,c<<=1;d[f++]=e(o),u=f-1,m--;break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)i=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),o|=(i>0?1:0)*c,c<<=1;d[f++]=e(o),u=f-1,m--;break;case 2:return h.join("")}if(0==m&&(m=Math.pow(2,p),p++),d[u])y=d[u];else{if(u!==f)return null;y=s+s.charAt(0)}h.push(y),d[f++]=s+y.charAt(0),s=y,0==--m&&(m=Math.pow(2,p),p++)}}};return s}();void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(1),o=n.n(s);function i(e){return e instanceof Set?e.size:e.length}function l(e,t){const n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,a={setA:r,setB:r,union:r,intersection:r};return s=>{if(s===e)return a;let o=0;s.forEach(e=>{(t&&n.has(t(e))||!t&&n.has(e))&&o++});const l=i(s);return{setA:r,setB:l,intersection:o,union:r+l-o}}}function c(e,t){const n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=Array.isArray(e)?e:Array.from(e),a={setA:r,setB:r,union:r,intersection:r};return s=>{if(s===e)return a;const o=[],i=r.slice();return s.forEach(e=>{t&&n.has(t(e))||!t&&n.has(e)?o.push(e):i.push(e)}),{setA:r,setB:Array.isArray(s)?s:Array.from(s),intersection:o,union:i}}}function u(e){return Array.isArray(e.elems)}function d(e){return"function"==typeof e.overlap}function m(e){return null!=e.set}function f(e,t,n){if(d(e))return e.overlap;if(m(e)&&e.set.overlap)return e.set.overlap;const r=l(u(e)?e.elems:e.set.elems,n);return n=>n.overlap&&u(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&m(e)?n.overlap(e.set):r(n.elems)[t]}function p(e,t,n){if(d(e))return()=>null;if("intersection"===t){const t=function(e,t){const n=e instanceof Set?Array.from(e):e,r=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return a=>{if(a===e)return n;const s=[];return a.forEach(e=>{(t&&r.has(t(e))||!t&&r.has(e))&&s.push(e)}),s}}(u(e)?e.elems:e.set.elems,n);return e=>t(e.elems)}const r=c(u(e)?e.elems:e.set.elems,n);return e=>r(e.elems)[t]}function y(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function h(e){return y(e)&&"set"===e.type}function g(e){const t=e;return y(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function b(e){return h(e)||g(e)}function v(e,t){return e.name.localeCompare(t.name)}function x(e,t){return t.cardinality-e.cardinality}function S(e,t){return e.degree-t.degree}function $(e){return(t,n)=>e.reduce((e,r)=>0===e?r(t,n):e,0)}function w(e){return(t,n)=>-e(t,n)}function E(e){return(t,n)=>{const r=e=>e<0?Number.POSITIVE_INFINITY:e;return r(e.findIndex(e=>t.sets.has(e)))-r(e.findIndex(e=>n.sets.has(e)))}}function C(e,t,n={}){let r=t;return n.order&&(r=r.sort(function(e,t){if(!t)return v;const n=Array.isArray(t)?t:[t];return 0===n.length?v:$(n.map(t=>{switch(t){case"cardinality":case"cardinality:desc":return x;case"cardinality:asc":return w(x);case"name:desc":return w(v);case"degree":case"degree:asc":return S;case"degree:desc":return w(S);case"group":case"group:asc":return E(e);case"group:desc":return w(E(e));default:return v}}))}(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}const k={distinctIntersection:" ∩ ",intersection:" ∩ ",union:" ∪ ",composite:","};function O(e){if(!e)return[255,255,255];const t=e.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);if(t)return[Number.parseInt(t[1],16),Number.parseInt(t[2],16),Number.parseInt(t[3],16)];const n=e.match(/\(([\d]+)[, ]([\d]+)[, ]([\d]+)\)/i);return n?[Number.parseInt(n[1],10),Number.parseInt(n[2],10),Number.parseInt(n[3],10)]:[255,255,255]}function N(e){if(1===e.length)return e[0];if(e.every(e=>null==e))return;const t=e.map(O),n=Math.floor(t.reduce((e,t)=>e+t[0],0)/t.length),r=Math.floor(t.reduce((e,t)=>e+t[1],0)/t.length),a=Math.floor(t.reduce((e,t)=>e+t[2],0)/t.length);return`#${n.toString(16)}${r.toString(16)}${a.toString(16)}`}function A(e,t,n){const r=Array.from(e).sort((e,n)=>t.get(e)-t.get(n));return 1===r.length?r[0].name:`(${r.map(e=>e.name).join(n)})`}function M(e,t,n,r,a){return{type:0===n.size?"composite":e,elems:r,color:a(Array.from(n).map(e=>e.color)),sets:n,name:t,cardinality:r.length,degree:n.size}}function L(e,t,n,r,a,s,o){const i=new Set(e.sets);t.sets.forEach(e=>i.add(e));const l=A(i,a,k[s]);if(0===e.cardinality||0===t.cardinality)return M(s,l,i,[],o);let c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);const d=new Set,m=n.get(u),f=[],p=c.elems.length;for(let e=0;e<p;e++){const t=c.elems[e],n=r(t);m.has(n)&&(d.add(n),f.push(t))}const y=M(s,l,i,f,o);return n.set(y,d),y}function j(e,t,n,r,a,s,o){const i=new Set(e.sets);t.sets.forEach(e=>i.add(e));const l=A(i,a,k[s]);if(0===e.cardinality){const e=M(s,l,i,t.elems,o);return n.set(e,n.get(t)),e}if(0===t.cardinality){const t=M(s,l,i,e.elems,o);return n.set(t,n.get(e)),t}let c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);const d=new Set(n.get(u)),m=n.get(u),f=u.elems.slice();c.elems.forEach(e=>{const t=r(e);m.has(t)||(d.add(t),f.push(e))});const p=M(s,l,i,f,o);return n.set(p,d),p}function z(e,t,n,r,a,s){if("number"==typeof t)return{type:"composite",elems:[],color:s?s([]):void 0,sets:new Set,name:"()",cardinality:t,overlap(e){return e===this||b(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return M(e,"()",new Set,t,s);const o=Array.from(r.values()),i=n.filter(e=>{const t=a(e);return o.every(e=>!e.has(t))});return M(e,"()",new Set,i,s)}function P(e,t={}){const{type:n="intersection",min:r=0,max:a=1/0,empty:s=!1,elems:o=[],notPartOfAnySet:i,toElemKey:l,mergeColors:c=N}=t,u=[],d=new Map(e.map((e,t)=>[e,t])),m=new Map(e.map(e=>[e,l?new Set(e.elems.map(l)):new Set(e.elems)])),f=l?null:m,p=l?m:null,y="union"===n?j:L;function h(t){if(t.degree<r||t.degree>a||0===t.cardinality&&!s)return;if("distinctIntersection"!==n)return void u.push(t);const o=e.filter(e=>!t.sets.has(e));let i=[];if(l){const e=o.map(e=>p.get(e));i=t.elems.filter(t=>{const n=l(t);return e.every(e=>!e.has(n))})}else{const e=o.map(e=>f.get(e));i=t.elems.filter(t=>e.every(e=>!e.has(t)))}if(i.length===t.cardinality)return void u.push(t);const d=M(n,t.name,t.sets,i,c);(0!==d.cardinality||s)&&u.push(d)}function g(e,t,r,o){if(t>a)return;const i=e.length;for(let a=0;a<i;a++){const l=e[a],u=[];for(let t=a+1;t<i;t++){const a=e[t],i=y(l,a,r,o,d,n,c);h(i),("union"===n||i.cardinality>0||s)&&u.push(i)}u.length>1&&g(u,t+1,r,o)}}r<=0&&h(l?z(n,i,o,p,l,c):z(n,i,o,f,e=>e,c));const b=e.map(e=>{const t=M(n,e.name,new Set([e]),e.elems,c);return m.set(t,m.get(e)),h(t),t});return l?g(b,2,p,l):g(b,2,f,e=>e),C(e,u,t)}function T(e,t={}){let n=e;if(t.order){const e=function(e){if(!e)return v;switch(e){case"cardinality":case"cardinality:desc":return $([x,v]);case"cardinality:asc":return $([w(x),v]);case"name:desc":return w(v);default:return v}}(t.order);n=n.slice().sort(e)}return null!=t.limit?n.slice(0,t.limit):n}function I(e,t,n={}){var r,a,s,o;const i="function"==typeof t?t:e=>e.sets,l=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},c=null!==(a=l.type)&&void 0!==a?a:"intersection",u=null!==(s=l.sets)&&void 0!==s?s:function(e,t,n={}){var r;const a="function"==typeof t?t:e=>e.sets,s=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},o=Object.create(null);return e.forEach(e=>{a(e).forEach(t=>{const n="string"==typeof t?t:String(t),r=o[n];null==r?o[n]=[e]:r.push(e)})}),T(Object.entries(o).map(([e,t])=>({type:"set",elems:t,name:String(e),cardinality:t.length})),s)}(e,i,{limit:l.setLimit,order:l.setOrder});if("union"===c)return{sets:u,combinations:P(u,{type:"union",limit:l.combinationLimit,order:l.combinationOrder})};const d=Object.create(null);u.forEach((e,t)=>{d[e.name]=[e,t]});const m=u.map(e=>e.name).sort().every((e,t)=>u[t].name===e)?void 0:(e,t)=>{var n,r,a,s;return(null!==(r=null===(n=d[e])||void 0===n?void 0:n[1])&&void 0!==r?r:-1)-(null!==(s=null===(a=d[t])||void 0===a?void 0:a[1])&&void 0!==s?s:-1)},f=null==l.sets&&null==l.setLimit?null:new Set(u.map(e=>e.name)),p=null!==(o=l.joiner)&&void 0!==o?o:k[c],y=[],h=Object.create(null),g=Array(u.length+1).fill(0).map(e=>[]);function b(e){switch(e.length){case 0:return"()";case 1:return e[0];default:return"("+e.slice().sort(m).join(p)+")"}}function v(e){const t=function(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return null!=m&&m(e[0],e[1])>0||null==m&&e[1]>e[0]?e[1]+"&"+e[0]:e[0]+"&"+e[1];default:return e.slice().sort(m).join("&")}}(e);let n=h[t];if(n)return n;const r={type:c,name:b(e),degree:e.length,sets:new Set(e.map(e=>d[e][0])),cardinality:0,elems:[]};return h[t]=r,y.push(r),g[r.degree].push(r),r}e.forEach(e=>{let t=i(e);f&&(t=t.filter(e=>f.has(e)));const n=v(t);n.elems.push(e),n.cardinality++});const x=()=>({sets:u,combinations:C(u,y,{order:l.combinationOrder,limit:l.combinationLimit})});if("distinctIntersection"===c)return x();const S=function(e,t){const n=new Map;return e.slice().reverse().forEach(e=>{0!==e.length&&1!==e[0].degree&&e.forEach(e=>{const r=Array.from(e.sets).map(e=>e.name);for(let a=0;a<r.length;a++){const s=r.slice();s.splice(a,1);const o=t(s);n.has(o)?n.get(o).push(e):n.set(o,[e])}})}),n}(g,v);return g.slice(1).forEach(e=>{e.forEach(e=>{var t;const n=new Set,r=[e.elems];(null!==(t=S.get(e))&&void 0!==t?t:[]).forEach(e=>{!function e(t,n,r){var a;n.has(t)||(n.add(t),t.elems.length<1e3?r[0].push(...t.elems):r.push(t.elems),(null!==(a=S.get(t))&&void 0!==a?a:[]).forEach(t=>e(t,n,r)))}(e,n,r)});const a=1===r.length?r[0]:r.flat();Object.assign(e,{elems:a,cardinality:a.length})})}),x()}function q(e){return`${e.name}:${e.type}#${e.cardinality}`}function B(e){return 0===e.sets.size}function R(e,t,n=q){const r={done:null,aKey:"",bKey:"",aIsSet:!1,bIsSet:!1,toKey:n};return e===t?(r.done=e.cardinality,r):0===e.cardinality||0===t.cardinality?(r.done=0,r):(r.aKey=n(e),r.bKey=n(t),r.aKey===r.bKey?(r.done=e.cardinality,r):(r.aIsSet=h(e),r.bIsSet=h(t),!r.aIsSet&&B(e)||!r.bIsSet&&B(t)?(r.done=0,r):r))}function _(e,t){return!(t.bIsSet||!t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.aKey)}function H(e,t){return!(!t.bIsSet||t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.bKey)}function K(e,t=q){return e.map(e=>{const n=Array.from(e.sets).map(t).sort();return{key:n.join("&"),s:n,sets:new Set(n),degree:e.degree,cardinality:e.cardinality}})}function F(e,t,n){const r=new Set;if(n.aIsSet)r.add(n.aKey);else for(const t of Array.from(e.sets))r.add(n.toKey(t));if(n.bIsSet)r.add(n.bKey);else for(const e of Array.from(t.sets))r.add(n.toKey(e));return Array.from(r).sort().join("&")}function U(e,t,n=q){const r=new Map;for(const t of K(e,n))for(const e of t.s)r.has(e)?r.get(e).push(t):r.set(e,[t]);return(e,a)=>{const s=R(e,a,n);if(null!=s.done)return s.done;if(!s.aIsSet&&!s.bIsSet)return 0;if(s.aIsSet&&!s.bIsSet)return _(a,s)?a.cardinality:0;if(!s.aIsSet&&s.bIsSet)return H(e,s)?e.cardinality:0;const o=r.get(s.aKey),i=r.get(s.bKey);return o&&i?o.length<i.length?o.reduce((e,t)=>e+(t.sets.has(s.bKey)?t.cardinality:0),0):i.reduce((e,t)=>e+(t.sets.has(s.aKey)?t.cardinality:0),0):t(e,a)}}function W(e,t,n=q){if(0===e.length)return t;const r=e[0].type;if(e.some(e=>e.type!==r))return t;switch(r){case"union":return function(e,t,n=q){const r=new Map(K(e,n).map(e=>[e.key,e.cardinality]));return(e,a)=>{const s=R(e,a,n);if(null!=s.done)return s.done;if(s.aIsSet&&!s.bIsSet&&_(a,s))return e.cardinality;if(!s.aIsSet&&s.bIsSet&&H(e,s))return a.cardinality;const o=F(e,a,s);return r.has(o)?e.cardinality+a.cardinality-r.get(o):t(e,a)}}(e,t,n);case"intersection":return function(e,t,n=q){const r=new Map(K(e,n).map(e=>[e.key,e.cardinality]));return(e,a)=>{const s=R(e,a,n);if(null!=s.done)return s.done;if(s.aIsSet&&!s.bIsSet&&_(a,s))return a.cardinality;if(!s.aIsSet&&s.bIsSet&&H(e,s))return e.cardinality;const o=F(e,a,s);return r.has(o)?r.get(o):t(e,a)}}(e,t,n);case"distinctIntersection":return U(e,t,n)}return t}function D(e,t,{toElemKey:n,what:r="intersection",compress:a="auto"}={}){const s=e.concat(t);const o=s.map((e,t)=>{const a=function(e){if(e.overlap)return e.overlap;const t=l(e.elems,n);return n=>n.overlap?n.overlap(e):t(n.elems)[r]}(e),o=[];for(let e=t+1;e<s.length;e++)o.push(a(s[e]));return o});if(o.pop(),"no"===a)return o;const i=function(e){return 0===e.length?"":`${e.length};${function(e){if(0===e.length)return"";const t=[];let n=e[0],r=1;for(let a=1;a<e.length;a++){const s=e[a];s===n?r++:(r>1?t.push(`${n}=${r-1}`):0===n?t.push(""):t.push(n.toString()),n=s,r=1)}return r>1?t.push(`${n}=${r}`):0===n?t.push(""):t.push(n.toString()),t.join(",")}(e.flat())}`}(o);if("yes"===a)return i;const c=JSON.stringify(o).length;return i.length+2<.6*c?i:o}const J=(e,t,n)=>{const r=e.length+n,a=t/Math.max(1,r),s=t-a*e.length,o=new Map(e.map((e,t)=>[e,t])),i=a/(1+n),l=e=>{const t=o.get(e);if(null!=t)return s+a*t};return l.bandwidth=()=>i,l};function V(e,t,n=1){for(let r=0;r<e.length-n;r+=n){const n=e[r],a=e[r+1];if(n<a){if(n+t[r]/2>a-t[r+1]/2)return!0}else{const e=n-t[r]/2;if(a+t[r+1]/2>e)return!0}}return!1}function G(e,t,n,r,a){let s=e[e.length-1];if(!s.label)for(let t=e.length-2;t>0;--t)if(e[t].label){s=e[t];break}if(s.value<t){const o=n(s.value),i=n(t);if(o<i){o+r(s.value)/2<i-r(t)/2&&e.push({value:t,label:a(t)})}else{const n=o-r(s.value)/2;i+r(t)/2<n&&e.push({value:t,label:a(t)})}}return e}function Q(e,t=String,n=1){return e.map((e,r)=>({value:e,label:1===n||r%n==0?t(e):void 0}))}function Z(e,t,n,r,a){const s=e.map(e=>t(e)),o=e.map(e=>n(e));return V(s,o)&&V(s,o,2)?null:G(Q(e,a),r,t,n,a)}function X(e){return e.toLocaleString()}function Y(e,t=1){const n=[];for(let r=0;r<=e;r+=t)n.push(r);return n}function ee(e,t,n,r){if(t<=0)return[];const a=function(e,t=11){const n=Math.max(0,Math.floor(Math.log10(e)-.5)),r=Math.pow(10,n),a=[1,2,5],s=a.map(e=>e*r);n>0&&s.unshift(a[a.length-1]*Math.pow(10,n-1)),s.push(a[0]*Math.pow(10,n+1));const o=Math.ceil(e/t);return s.filter(t=>t>=o&&t<=e)}(e,t);for(let t=0;t<a.length;t++){const s=Z(Y(e,a[t]),n,r,e,X);if(s)return s}return Q([0,e],X)}const te=(e,t,n)=>{const r=t[1]-t[0],a=e,s=e=>{const n=Math.max(0,Math.min(e,a))/a;return t[0]+n*r};return s.ticks=(t=10)=>{if("vertical"===n.orientation){const r=Math.ceil(1.4*n.fontSizeHint);return ee(e,t+1,s,()=>r)}const r=n.fontSizeHint/1.4;return ee(e,t+1,s,e=>Math.ceil(X(e).length*r))},s.tickFormat=()=>X,s};function ne(e){const t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1));return`${(Math.round(e/Math.pow(10,3*n-1))/10).toLocaleString()}${t[n]}`}function re(e,t){const n=[],r=Math.pow(10,t);for(let t=1;t<=e;t*=r)n.push(t);return n}function ae(e,t){const n=[];for(let r=1,a=0;r<=e;r*=10,a++){n.push({value:r,label:1===t||a%t==0?ne(r):void 0});for(let a=r+r;a<10*r&&a<e;a+=r*t)n.push({value:a})}return n}function se(e,t,n,r){if(t<=0)return[];for(const t of[1,2,5]){if(Z(re(e,t),n,r,e,ne))return G(ae(e,t),e,n,r,ne)}return Q([0,e],ne)}const oe=(e,t,n)=>{const r=t[1]-t[0],a=e<1?1:Math.log10(e),s=e=>{const n=Math.max(0,Math.min(e,a)),s=n<=1?0:Math.log10(n)/a;return t[0]+s*r};return s.ticks=(t=10)=>{if("vertical"===n.orientation){const r=Math.ceil(1.4*n.fontSizeHint);return se(e,t+1,s,()=>r)}const r=n.fontSizeHint/1.4;return se(e,t+1,s,e=>Math.ceil(ne(e).length*r))},s.tickFormat=()=>ne,s};function ie(e,t,{sortAble:n,compress:r="auto"}={}){if(0===e.length)return[];const a=e.map(e=>t(e));if("no"===r)return a;n&&a.sort((e,t)=>e-t);const s=function(e){if(0===e.length)return"";const t=[];let n=0;const r=r=>(r===n+1?t.push(e[n].toString()):r===n+2&&r<10?t.push(`${e[n]},${e[n+1]}`):t.push(`${e[n]}+${r-n-1}`),r);for(let t=1;t<e.length;t++){const a=e[t-1]+1;e[t]!==a&&(n=r(t),n=t)}return r(e.length),t.join(",")}(a),o=JSON.stringify(a).length,i=s.length+2;return i<.6*o||o-i>50||"yes"===r&&i<o?s:a}function le(e,t){return t.color&&(e.color=t.color),e}function ce(e,t){return 1===e.length?e[0].name:`(${e.map(e=>e.name).join(k[t])})`}var ue=n(2),de=n.n(ue);function me(e){return Array.from(e.classList).find(e=>e.startsWith("root-")).slice("root-".length)}function fe(e,t){var n,r;return null!==(r=null===(n=e.querySelector("titleTextStyle-"+t))||void 0===n?void 0:n.textContent)&&void 0!==r?r:"UpSetJS"}function pe(e,t){var n,r;return null!==(r=null===(n=e.querySelector("descTextStyle-"+t))||void 0===n?void 0:n.textContent)&&void 0!==r?r:""}const ye={},he=[],ge={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"},be=[.18,.12,.7],ve=[.6,.4],xe={type:"intersection",order:["cardinality:desc","name:asc"]},Se=Object.keys(ge),$e=[.7,.4],we=[.15,.3];const Ee={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!1},Ce={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030",filled:!1},ke={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!0};function Oe(e){return"vega"===e?ke:"dark"===e?Ce:Ee}function Ne(e,t,n={}){const r=Oe(t.theme);return Object.assign(e,{queryLegend:null!=t.queries&&t.queries.length>0,theme:"light",padding:20,selection:null,title:"",description:"",fontFamily:"sans-serif",queries:he,exportButtons:!0,className:"",fontSizes:ge,classNames:ye,style:ye,styles:ye,toKey:q,tooltips:!0},r,t,n,t.fontSizes?{fontSizes:Object.assign({},ge,t.fontSizes)}:ye)}function Ae(e){return function(e){return Ne({barPadding:.3,dotPadding:.7,combinations:xe,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",widthRatios:be,heightRatios:ve,setLabelAlignment:"center",numericScale:"linear",bandScale:"band",childrenFactories:ye,setAddons:he,combinationAddons:he,setAddonPadding:1,combinationAddonPadding:1,emptySelection:!0},e);var t}(e)}function Me(e,t){const n=e.cloneNode(!0);return n.style.backgroundColor=Oe(e.dataset.theme).backgroundColor,t&&Array.from(n.querySelectorAll(t)).forEach(e=>e.remove()),(new XMLSerializer).serializeToString(n)}function Le(e,{type:t="png",title:n,toRemove:r}){const a=new Blob([Me(e,r)],{type:"image/svg+xml;charset=utf-8"}),s=me(e),o=null!=n?n:fe(e,s),i=URL.createObjectURL(a);return"svg"===t?(je(i,`${o}.${t}`,e.ownerDocument),URL.revokeObjectURL(i),Promise.resolve()):function(e,t){const n=t.ownerDocument.createElement("canvas"),r=t.getBoundingClientRect();n.width=r.width,n.height=r.height;const a=n.getContext("2d"),s=new Image(n.width,n.height);return new Promise(t=>{s.onload=()=>{a.drawImage(s,0,0);const e=n.toDataURL("image/png");t(e)},s.src=e})}(i,e).then(n=>{je(n,`${o}.${t}`,e.ownerDocument),URL.revokeObjectURL(i)})}function je(e,t,n){const r=n.createElement("a");r.href=e,r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.download=t,n.body.appendChild(r),r.click(),r.remove()}function ze(e,{title:t}={}){const n=function(e,t){var n,r,a,s,o;const i=null!==(a=e.getComputedStyle||(null===(r=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getComputedStyle))&&void 0!==a?a:window.getComputedStyle,l=me(e),c=null!=t?t:fe(e,l),u=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map(e=>({name:e.querySelector("text.setTextStyle-"+l).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)})).reverse(),d=-Number.parseFloat(e.querySelector(".sBarTextStyle-"+l).getAttribute("dx")),m=i(e.querySelector(".fillPrimary-"+l)).fill,f=i(e.querySelector(".fillNotMember-"+l)).fill,p=i(e.querySelector("text")).fill,y=e.querySelector(".cChartTextStyle-"+l).textContent,h=e.querySelector(".sChartTextStyle-"+l).textContent,g=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map(e=>({name:e.querySelector("text.hoverBarTextStyle-"+l).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(`.fillPrimary-${l} > title`)).map(e=>e.textContent)})),b=e=>Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1]),v=e.querySelector("[data-upset=base]"),x=b(v),S=b(e.querySelector("[data-upset=csaxis]")),$=Number.parseFloat(v.querySelector("g").firstElementChild.children[1].getAttribute("x2")),w=(E=e.querySelector("[data-upset=setaxis]"),Number.parseFloat(E.getAttribute("transform").match(/,([\d.]+)/)[1]));var E;const C=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),k=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),O=Number.parseFloat(e.querySelector("[data-cardinality] circle.fillPrimary-"+l).getAttribute("r")),N=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),A=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),M=N||A;let L="orange";M&&(Array.from(e.querySelectorAll(`[data-upset=sets-${N?"s]":"q]:first-of-type"} [data-cardinality]`)).forEach(e=>{const t=u.length-Number.parseInt(e.dataset.i,10)-1;u[t].selection=Number.parseInt(e.dataset.cardinality,10)}),Array.from(e.querySelectorAll(`[data-upset=cs-${N?"s]":"q]:first-of-type"} [data-cardinality]`)).forEach(e=>{const t=Number.parseInt(e.dataset.i,10);g[t].selection=Number.parseInt(e.dataset.cardinality,10)}),L=i(e.querySelector(`[data-upset=sets-${N?"s":"q"}] [data-cardinality]`)).fill);const j=Number.parseInt(null!==(o=null===(s=e.querySelector("[data-upset=cs-ss]"))||void 0===s?void 0:s.dataset.i)&&void 0!==o?o:"-1",10),z=j>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:c,description:pe(e,l),datasets:{sets:u,combinations:g.map((e,t)=>Object.assign({},e,{partOf:j===t?2:1,nsets:[""]})).concat(g.map(e=>({name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:u.filter(t=>!e.sets.includes(t.name)).map(e=>e.name)})))},vconcat:[{hconcat:[{mark:"bar",width:S+C-40,height:w},{width:$,height:w,data:{name:"combinations"},transform:[{filter:z}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-d},encoding:{text:{field:"cardinality",type:"quantitative"}}},M&&{mark:{type:"bar",fill:L,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:y}}}]},{hconcat:[{width:S,height:k,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-d},encoding:{text:{field:"cardinality",type:"quantitative"}}},M&&{mark:{type:"bar",fill:L,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:h,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:C,height:k,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(i(e.querySelector(".setTextStyle-"+l)).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:$,height:k,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:O*O*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[f,m].concat(j>=0?[L]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null,scale:{domain:u.map(e=>e.name)}}}},{mark:"rule",transform:[{filter:z},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:Object.assign({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},j<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[m,L]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:x,background:Oe(e.dataset.theme).backgroundColor,concat:{spacing:0},view:{stroke:null},bar:{fill:m},circle:{opacity:1},rule:{stroke:m,strokeWidth:Number.parseInt(i(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:p,labelFontSize:Number.parseInt(i(e.querySelector(".axisTextStyle-"+l)).fontSize,10),titleColor:p,titleFontSize:Number.parseInt(i(e.querySelector(".cChartTextStyle-"+l)).fontSize,10)},title:{color:p},text:{fill:p,fontSize:Number.parseInt(i(e.querySelector(".sBarTextStyle-"+l)).fontSize,10)}}}}(e,t),r=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:"application/json"}));je(r,n.title+".json",e.ownerDocument),URL.revokeObjectURL(r)}const Pe=["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);function Te(e){var t;const n=Ae({width:0,height:0,sets:null!==(t=e.sets)&&void 0!==t?t:[],combinations:e.combinations,theme:e.theme}),r={};return Pe.forEach(t=>{const a=e[t],s=n[t];if("theme"!==t||"light"===a){if(null!=a&&a!==s)if("fontSizes"===t){let e=!0;const n={};Se.forEach(t=>{const r=a[t];r!==s[t]&&(n[t]=r,e=!1)}),e||(r[t]=n)}else r[t]=a}else r[t]=a}),r}function Ie(e,t,n=!1,r){var a,s;const o=[],i=new Map;return function(e,t,n,r,a){return Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json",name:"string"==typeof n.title?n.title:"UpSetJS",description:"string"==typeof n.description?n.description:"",mode:a,author:r,elements:t,attrs:[],props:Te(n)},e)}(function(e,t={}){var n;const r=Object.assign({sortAble:!0},t),a=null!==(n=t.toKey)&&void 0!==n?n:q,s=new Map(e.sets.map((e,t)=>[a(e),t])),o=new Map(e.combinations.map((e,t)=>[a(e),t])),i=t=>{if("set"===t.type)return{type:t.type,index:s.get(a(t))};const n=o.get(a(t));return null==n||n<0?ie(t.elems,e.toElemIndex,r):{type:t.type,index:n}},l=e.sets.map((e,t)=>({key:a(e),i:t}));return{sets:e.sets.map(t=>le({name:t.name,cardinality:t.cardinality,elems:ie(t.elems,e.toElemIndex,r)},t)),combinations:"no"===t.compress?e.combinations.map(t=>{const n=new Set(Array.from(t.sets).map(a));return le({name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:l.filter(({key:e})=>n.has(e)).map(({i:e})=>e),elems:ie(t.elems,e.toElemIndex,r)},t)}):void 0,combinationOptions:e.combinationOptions,selection:e.selection?Array.isArray(e.selection)?ie(e.selection,e.toElemIndex,r):i(e.selection):void 0,queries:e.queries.map(t=>{const n=m(t)?i(t.set):ie(Array.from(t.elems),e.toElemIndex,r);return{name:t.name,color:t.color,set:"string"==typeof n||Array.isArray(n)?void 0:n,elems:"string"==typeof n||Array.isArray(n)?n:void 0}})}}({sets:e.sets,queries:null!==(s=null===(a=e.queries)||void 0===a?void 0:a.filter(e=>u(e)||m(e)))&&void 0!==s?s:[],toElemIndex:e=>i.has(e)?i.get(e):(i.set(e,o.length),o.push(e),o.length-1),selection:e.selection&&b(e.selection)?e.selection:void 0,combinations:t.cs.v,combinationOptions:Array.isArray(e.combinations)?{}:e.combinations},{compress:n?"yes":"no"}),o,e,void 0,r)}function qe(e,t,n=!1,r){var a,s;return function(e,t,n,r){return Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json",name:"string"==typeof t.title?t.title:"UpSetJS",description:"string"==typeof t.description?t.description:"",mode:r,author:n,props:Te(t)},e)}(function(e,t={}){var n;const r=null!==(n=t.toKey)&&void 0!==n?n:q,a=new Map(e.sets.map((e,t)=>[r(e),t])),s=new Map(e.combinations.map((e,t)=>[r(e),t])),o=t=>{if(b(t)){if("set"===t.type)return{type:t.type,index:a.get(r(t))};const e=s.get(r(t));if(null!=e&&e>=0)return{type:t.type,index:e}}const n=l(b(t)?t.elems:t);return e.sets.map(e=>n(e.elems).intersection).concat(e.combinations.map(e=>n(e.elems).intersection))},i=new Map(e.sets.map((e,t)=>[r(e),t])),c=D(e.sets,e.combinations,t),u="yes"===t.compress;return{sets:u?e.sets.map(e=>({n:e.name,cc:e.color,c:e.cardinality})):e.sets.map(e=>le({name:e.name,cardinality:e.cardinality},e)),combinations:u?e.combinations.map(t=>{const n=Array.from(t.sets).map(e=>i.get(r(e))).sort((e,t)=>e-t),a={c:t.cardinality,s:n.reduce((e,t)=>e+Math.pow(2,t),0)};return t.name!==ce(n.map(t=>e.sets[t]),t.type)&&(a.n=t.name),"intersection"!==t.type&&(a.type=t.type[0]),t.color&&(a.cc=t.color),a}):e.combinations.map(e=>le({name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map(e=>i.get(r(e))).sort((e,t)=>e-t)},e)),overlaps:c,selection:e.selection?o(e.selection):void 0,queries:e.queries.map(t=>{if(m(t)){const e=o(t.set);return Array.isArray(e)?{name:t.name,color:t.color,overlaps:e}:{name:t.name,color:t.color,set:e}}const n=l(t.elems),r=e.sets.map(e=>n(e.elems).intersection).concat(e.combinations.map(e=>n(e.elems).intersection));return{name:t.name,color:t.color,overlaps:r}})}}({sets:e.sets,queries:null!==(s=null===(a=e.queries)||void 0===a?void 0:a.filter(e=>u(e)||m(e)))&&void 0!==s?s:[],selection:e.selection&&b(e.selection)?e.selection:void 0,combinations:t.cs.v},{compress:n?"yes":"no"}),e,void 0,r)}function Be(e,t,n,r){const a=Ie(t,n,!1,r),s=URL.createObjectURL(new Blob([JSON.stringify(a,null,2)],{type:"application/json"}));je(s,a.name+".json",e.ownerDocument),URL.revokeObjectURL(s)}function Re(e,t,n){const r=Ie(e,t,!0,n);delete r.$schema;const a=de.a.compressToEncodedURIComponent(JSON.stringify(r)),s=new URL("https://upset.js.org/app/embed.html");if(s.searchParams.set("p",a),s.toString().length<4096)return window.open(s.toString(),"_blank"),!0;const o=qe(e,t,!0,n);delete o.$schema;const i=de.a.compressToEncodedURIComponent(JSON.stringify(o));if(s.searchParams.set("p",i),s.toString().length<4096)return window.open(s.toString(),"_blank"),!0;s.searchParams.delete("p");const l=window.open(s.toString(),"_blank");return null==l||l.addEventListener("load",()=>{null==l||l.postMessage(r,s.origin)}),!1}function _e(...e){return e.filter(Boolean).join(" ")}function He(e){return"upset-"+Math.random().toString(36).slice(4)}function Ke(e){return null!=e&&!Array.isArray(e)}function Fe(e,t){const n=l(e,t);return e=>n(e.elems).intersection}function Ue(){return-1}function We(e,t,n){if(!e)return Je;if("function"==typeof e)return e;if(Array.isArray(e))return Fe(e,n);const r=e;if(r.overlap)return r.overlap.bind(r);let a=null;return e=>{if(e.overlap)return e.overlap(r);const s=t(e,r);return s>=0?s:(a||(a=Fe(r.elems,n)),a(e))}}function De(e){var t;return Array.isArray(e)?`Array(${e.length})`:"function"==typeof e?"?":null===(t=e)||void 0===t?void 0:t.name}function Je(){return 0}function Ve(e){return null==e?10:e.endsWith("pt")?Math.floor(4/3*Number.parseInt(e,10)):Number.parseInt(e,10)}function Ge(e){return"linear"===e?te:"log"===e?oe:e}function Qe(e){return Array.isArray(e)}function Ze(e,t,n,r,a,s,o,i,l,c,u,d,m,f,p){var y;const h=Ge(r),g="band"===(b=a)?J:b;var b;const v=Qe(t)?t:P(e,Object.assign({toElemKey:d},xe,t)),x=g(v.map(u),n.cs.w,n.padding),S=v.reduce((e,t)=>Math.max(e,t.cardinality),0),$=null!=p?p:S,w=$>S?0:s,E=h($,[n.cs.h,w],{orientation:"vertical",fontSizeHint:l}),C=e=>Math.floor(s/1.4*.7*e.length),k=e=>C(E.tickFormat()(e)),O=e.reduce((e,t)=>Math.max(e,t.cardinality),0),N=null!=f?f:O,A=k(N);let M=k($);for(const e of c){if(!e.scale)continue;const t=e.scale.ticks(3),n=e.scale.tickFormat();for(const e of t){const t="number"==typeof e?n(e):null!==(y=e.label)&&void 0!==y?y:n(e.value),r=C(t);r>M&&(M=r)}}const L=N>O?0:A,j=h(N,[n.sets.w,L],{orientation:"horizontal",fontSizeHint:l}),z=e.map(u),T=g(z.slice().reverse(),n.sets.h,n.padding),I=Math.min(T.bandwidth(),x.bandwidth())/2*o,q=Math.max(2,Math.min(T.bandwidth(),x.bandwidth())/2*i);return{id:m||He(),r:I,triangleSize:q,sets:{v:e,keys:z,rv:e.slice().reverse(),x:j,xAxisWidth:n.sets.w-L,y:e=>T(u(e)),max:N,bandWidth:T.bandwidth(),cy:T.bandwidth()/2+n.cs.h,format:j.tickFormat(),labelOffset:s+9+2},cs:{v:v,keys:v.map(u),x:e=>x(u(e)),max:$,y:E,yAxisWidth:n.cs.h-w,cx:x.bandwidth()/2,bandWidth:x.bandwidth(),format:E.tickFormat(),has:(e,t)=>{const n=u(t);return Array.from(e.sets).some(e=>u(e)===n)},labelOffset:M+9+6},toKey:u,toElemKey:d,overlapGuesser:W(v,Ue,u)}}function Xe({transform:e,styleId:t,exportButtons:n,exportChart:r}){if(!n)return null;let s=0;const o=[];return!0!==n&&!1===n.svg||(s+=26,o.push(a.a.createElement("g",{key:"svg",className:"exportButton-"+t,onClick:r,"data-type":"svg",transform:`translate(-${s}, 0)`},a.a.createElement("title",null,"Download SVG Image"),a.a.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),a.a.createElement("text",{className:"exportTextStyle-"+t,x:13},"SVG"))),s+=2),!0!==n&&!1===n.png||(s+=26,o.push(a.a.createElement("g",{key:"png",className:"exportButton-"+t,onClick:r,"data-type":"png",transform:`translate(-${s}, 0)`},a.a.createElement("title",null,"Download PNG Image"),a.a.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),a.a.createElement("text",{className:"exportTextStyle-"+t,x:13},"PNG"))),s+=2),!0!==n&&!1===n.vega||(s+=34,o.push(a.a.createElement("g",{key:"vega",className:"exportButton-"+t,onClick:r,"data-type":"vega",transform:`translate(-${s}, 0)`},a.a.createElement("title",null,"Download VEGA-Lite Specification"),a.a.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),a.a.createElement("text",{className:"exportTextStyle-"+t,x:17},"VEGA"))),s+=2),!0!==n&&!1===n.dump||(s+=34,o.push(a.a.createElement("g",{key:"dump",className:"exportButton-"+t,onClick:r,"data-type":"dump",transform:`translate(-${s}, 0)`},a.a.createElement("title",null,"Download UpSet.js JSON Dump"),a.a.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),a.a.createElement("text",{className:"exportTextStyle-"+t,x:17},"DUMP"))),s+=2),!0!==n&&!1===n.share||(s+=42,o.push(a.a.createElement("g",{key:"share",className:"exportButton-"+t,onClick:r,"data-type":"share",transform:`translate(-${s}, 0)`},a.a.createElement("title",null,"Open a shareable URL"),a.a.createElement("rect",{y:-9,width:42,height:11,rx:2,ry:2}),a.a.createElement("text",{className:"exportTextStyle-"+t,x:21},"SHARE"))),s+=2),a.a.createElement("g",{className:"exportButtons-"+t,transform:e},o)}const Ye=a.a.memo((function({queries:e,x:t,style:n,data:r}){return a.a.createElement("text",{transform:`translate(${t},4)`,style:n.styles.legend,className:_e("legendTextStyle-"+n.id,n.classNames.legend)},e.map((e,t)=>{let n=null;return m(e)?n=e.set.cardinality:u(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("tspan",{className:`fillQ${t}-${r.id}`},"  ⬤ "),a.a.createElement("tspan",null,e.name,null!=n?": "+r.sets.format(n):""))}))})),et=a.a.memo((function({pos:e,spacing:t,tickSizeInner:n,orient:r,name:s,style:o}){const i="top"===r||"left"===r?-1:1;return a.a.createElement("g",{transform:`translate(0, ${e+.5})`},s&&a.a.createElement("text",{x:i*t,dy:"0.32em",className:_e("axisTextStyle-"+o.id,"right"===r?"startText-"+o.id:"endText-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},s),a.a.createElement("line",{x2:i*n,className:"axisLine-"+o.id}))})),tt=a.a.memo((function({pos:e,name:t,spacing:n,orient:r,tickSizeInner:s,style:o}){const i="top"===r||"left"===r?-1:1;return a.a.createElement("g",{transform:`translate(${e+.5}, 0)`},t&&a.a.createElement("text",{y:i*n,dy:"top"===r?"0em":"0.71em",className:_e("axisTextStyle-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},t),a.a.createElement("line",{y2:i*s,className:"axisLine-"+o.id}))}));function nt({scale:e,orient:t,tickSizeInner:n=6,tickSizeOuter:r=6,tickPadding:s=3,size:o,start:i,style:l,transform:c}){const u=Math.max(n,0)+s,d=i,m=o,f="top"===t||"left"===t?-1:1,p="left"===t||"right"===t?et:tt,y=e.ticks().map(e=>"number"==typeof e?{value:e,label:String(e)}:e);return a.a.createElement("g",{transform:c},y.map(r=>a.a.createElement(p,{key:r.value,pos:e(r.value),name:r.label,spacing:u,tickSizeInner:n,orient:t,style:l})),a.a.createElement("path",{className:"axisLine-"+l.id,d:"left"===t||"right"===t?r?`M${f*r},${d}H0.5V${m}H${f*r}`:`M0.5,${d}V${m}`:r?`M${d},${f*r}V0.5H${m}V${f*r}`:`M${d},0.5H${m}`}))}const rt=a.a.memo((function({width:e,text:t,dy:n,x:s,style:o,className:i}){const l=Object(r.useRef)(null),[c,u]=Object(r.useState)("string"==typeof t?[t]:[]);return Object(r.useLayoutEffect)(()=>{u("string"==typeof t?[t]:[])},[t]),Object(r.useLayoutEffect)(()=>{if(!l.current||l.current.childElementCount>0||"string"!=typeof t||"function"!=typeof l.current.getComputedTextLength)return;const n=l.current.getComputedTextLength(),r=[];let a=e,s=0;const o=l.current.getStartPositionOfChar(0);for(;n>a;){o.x=a;const n=l.current.getCharNumAtPosition(o),i=t.lastIndexOf(" ",n);if(i<s)break;r.push(t.slice(s,i+1));s=i+1,a=l.current.getEndPositionOfChar(i+1).x+e}r.push(t.slice(s)),u(r)},[l,t,e]),t?a.a.createElement("tspan",{ref:l,dy:n,style:o,x:s,className:i},c.length>1?c.map((e,t)=>a.a.createElement("tspan",{key:e,x:0,dy:t>0?"1.2em":n},e)):t):null}));var at=a.a.memo((function({width:e,descriptionWidth:t=e,style:n}){return n.title||n.description?a.a.createElement("text",null,a.a.createElement(rt,{text:n.title,width:e,dy:"10px",className:_e("titleTextStyle-"+n.id,n.classNames.title),style:n.styles.title}),a.a.createElement(rt,{x:0,width:t,dy:n.title?"2em":"10px",text:n.description,className:_e("descTextStyle-"+n.id,n.classNames.description),style:n.styles.description})):null}));function st(){}function ot(e){return e?(t,n)=>function(r){return e.call(this,t,r.nativeEvent,n.map(e=>e.createOnHandlerData?e.createOnHandlerData(t):null))}:st}function it(e,t){let n=0,r=0;return a=>{let s=0;return"before"===a.position?(n+=a.size+t,s=-n):(s=e+r+t,r+=a.size+t),s}}function lt(e,t,n="fill"){return t?e?Object.assign({[n]:t},e):t?{[n]:t}:void 0:e}const ct=a.a.memo((function({size:e,style:t,data:n}){const r=it(e.sets.w+e.labels.w+e.cs.w,e.sets.addonPadding),s=it(e.cs.h+e.sets.h,e.cs.addonPadding),o="auto"===t.cs.offset?n.cs.labelOffset:t.cs.offset,i="auto"===t.sets.offset?n.sets.labelOffset:t.sets.offset;return a.a.createElement("g",null,a.a.createElement(at,{style:t,width:e.cs.x-o-20}),a.a.createElement("g",{transform:`translate(${e.cs.x},${e.cs.y})`,"data-upset":"csaxis"},a.a.createElement(nt,{scale:n.cs.y,orient:"left",size:e.cs.h,start:e.cs.h-n.cs.yAxisWidth,style:t}),a.a.createElement("line",{x1:0,x2:e.cs.w,y1:e.cs.h+1,y2:e.cs.h+1,className:"axisLine-"+t.id}),a.a.createElement("text",{className:_e("cChartTextStyle-"+t.id,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${-o}, ${e.cs.h/2})rotate(-90)`},t.cs.name),e.cs.addons.map(e=>{const n=s(e),r=a.a.createElement("text",{key:e.name,className:_e("cChartTextStyle-"+t.id,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${-o}, ${n+e.size/2})rotate(-90)`},e.name);return e.scale?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement(nt,{scale:e.scale,orient:"left",size:e.size,start:0,style:t,transform:`translate(0,${n})`}),r):r})),a.a.createElement("g",{transform:`translate(${e.sets.x},${e.sets.y})`,"data-upset":"setaxis"},a.a.createElement(nt,{scale:n.sets.x,orient:"bottom",size:e.sets.w,start:e.sets.w-n.sets.xAxisWidth,transform:`translate(0, ${e.sets.h})`,style:t}),a.a.createElement("text",{className:_e("sChartTextStyle-"+t.id,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${e.sets.w/2}, ${e.sets.h+i})`},t.sets.name),e.sets.addons.map(n=>{const s=r(n),o=a.a.createElement("text",{key:n.name,className:_e("sChartTextStyle-"+t.id,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${s+n.size/2}, ${e.sets.h+i})`},n.name);return n.scale?a.a.createElement(a.a.Fragment,{key:n.name},a.a.createElement(nt,{scale:n.scale,orient:"bottom",size:n.size,start:0,transform:`translate(${s}, ${e.sets.h})`,style:t}),o):o})))})),ut=a.a.memo((function({cx:e,r:t,cy:n,name:r,className:s,style:o,fill:i}){return a.a.createElement("circle",{r:t,cx:e,cy:n,className:s,style:lt(o,i)},r&&a.a.createElement("title",null,r))}));function dt(e,t,n){const r=[n(e)];for(let a=0;a<we.length&&e>t;a++)e-=t,r.push(n(e));return r}const mt=a.a.memo((function({d:e,h:t,className:n,data:r,size:s,style:o,children:i}){const l=dt(e.cardinality,r.cs.max,r.cs.y),c=it(s.cs.h+s.sets.h,s.cs.addonPadding);return a.a.createElement("g",{transform:`translate(${r.cs.x(e)}, 0)`,onMouseEnter:t.onMouseEnter(e,s.cs.addons),onMouseLeave:t.onMouseLeave,onClick:t.onClick(e,s.cs.addons),onContextMenu:t.onContextMenu(e,s.cs.addons),onMouseMove:t.onMouseMove(e,s.cs.addons),className:n,"data-cardinality":e.cardinality},o.tooltips&&a.a.createElement("title",null,e.name,": ",r.cs.format(e.cardinality)),a.a.createElement("rect",{y:-s.cs.before,width:r.cs.bandWidth,height:s.sets.h+s.cs.h+s.cs.before+s.cs.after,className:"hoverBar-"+o.id}),l.map((t,n)=>{const i=n>0?Math.floor(r.cs.bandWidth*we[n-1]):0;return a.a.createElement("rect",{key:n,x:i,y:t,height:s.cs.h-t,width:r.cs.bandWidth-2*i,className:_e("fillPrimary-"+o.id,n<l.length-1&&`fillOverflow${l.length-1-n}-${o.id}`,o.classNames.bar),style:lt(o.styles.bar,e.color)})}),a.a.createElement("text",{y:l[0]-o.barLabelOffset,x:r.cs.bandWidth/2,style:o.styles.barLabel,className:_e("cBarTextStyle-"+o.id,o.classNames.barLabel)},r.cs.format(e.cardinality)),a.a.createElement("text",{y:-o.barLabelOffset-s.cs.before,x:r.cs.bandWidth/2,style:o.styles.barLabel,className:_e("hoverBarTextStyle-"+o.id,o.classNames.barLabel)},e.name),r.sets.v.map((t,n)=>r.cs.has(e,t)?null:a.a.createElement(ut,{key:r.sets.keys[n],r:r.r,cx:r.cs.cx,cy:r.sets.y(t)+r.sets.cy,name:o.tooltips?e.name:"",style:o.styles.dot,fill:void 0,className:_e("fillNotMember-"+o.id,o.classNames.dot)})),e.sets.size>1&&a.a.createElement("line",{x1:r.cs.cx,y1:r.sets.y(r.sets.v.find(t=>r.cs.has(e,t)))+r.sets.cy-(r.r-1),x2:r.cs.cx,y2:r.sets.y(r.sets.rv.find(t=>r.cs.has(e,t)))+r.sets.cy+(r.r-1),style:e.color?{stroke:e.color}:void 0,className:"upsetLine-"+r.id}),r.sets.v.map((t,n)=>{var s;return r.cs.has(e,t)?a.a.createElement(ut,{key:r.sets.keys[n],r:r.r,cx:r.cs.cx,cy:r.sets.y(t)+r.sets.cy,name:o.tooltips?t.name:"",style:o.styles.dot,fill:null!==(s=t.color)&&void 0!==s?s:e.color,className:_e("fillPrimary-"+o.id,o.classNames.dot)}):null}),s.cs.addons.map(t=>a.a.createElement("g",{key:t.name,transform:`translate(0,${c(t)})`},t.render({set:e,width:r.cs.bandWidth,height:t.size,theme:o.theme}))),i)})),ft=a.a.memo((function({d:e,i:t,h:n,className:r,size:s,data:o,style:i,children:l}){const c=dt(e.cardinality,o.sets.max,o.sets.x),u=it(s.sets.w+s.labels.w+s.cs.w,s.sets.addonPadding),d="center"===i.setLabelAlignment?s.labels.w/2:"left"===i.setLabelAlignment?2:s.labels.w-2;return a.a.createElement("g",{transform:`translate(0, ${o.sets.y(e)})`,onMouseEnter:n.onMouseEnter(e,s.sets.addons),onMouseLeave:n.onMouseLeave,onClick:n.onClick(e,s.sets.addons),onContextMenu:n.onContextMenu(e,s.sets.addons),onMouseMove:n.onMouseMove(e,s.sets.addons),className:r,"data-cardinality":e.cardinality},i.tooltips&&a.a.createElement("title",null,e.name,": ",o.sets.format(e.cardinality)),a.a.createElement("rect",{x:-s.sets.before,width:s.sets.w+s.labels.w+s.cs.w+s.sets.after,height:o.sets.bandWidth,className:"hoverBar-"+i.id}),t%2==1&&a.a.createElement("rect",{x:s.sets.w,width:s.labels.w+s.cs.w+s.sets.after,height:o.sets.bandWidth,className:"fillAlternating-"+i.id}),c.map((t,n)=>{const r=n>0?Math.floor(o.sets.bandWidth*we[n-1]):0;return a.a.createElement("rect",{key:n,x:t,y:r,width:s.sets.w-t,height:o.sets.bandWidth-2*r,className:_e("fillPrimary-"+i.id,n<c.length-1&&`fillOverflow${c.length-1-n}-${i.id}`,i.classNames.bar),style:lt(i.styles.bar,e.color)})}),a.a.createElement("text",{x:c[0],dx:-i.barLabelOffset,y:o.sets.bandWidth/2,style:i.styles.barLabel,className:_e("sBarTextStyle-"+i.id,i.classNames.barLabel)},o.sets.format(e.cardinality)),a.a.createElement("text",{x:s.sets.w+d,y:o.sets.bandWidth/2,className:_e("setTextStyle-"+i.id,i.classNames.setLabel),style:i.styles.setLabel,clipPath:`url(#clip-${s.id})`},e.name),s.sets.addons.map(t=>a.a.createElement("g",{key:t.name,transform:`translate(${u(t)},0)`},t.render({set:e,width:t.size,height:o.sets.bandWidth,theme:i.theme}))),l)})),pt=a.a.memo((function({data:e,size:t,style:n,h:r,setChildrenFactory:s,combinationChildrenFactory:o}){return a.a.createElement("g",{className:r.hasClick?"clickAble-"+n.id:void 0},a.a.createElement("g",{transform:`translate(${t.sets.x},${t.sets.y})`,"data-upset":"sets"},e.sets.v.map((o,i)=>a.a.createElement(ft,{key:e.sets.keys[i],d:o,i:i,h:r,className:r.hasClick||r.hasHover?"interactive-"+n.id:void 0,data:e,style:n,size:t},s&&s(o)))),a.a.createElement("g",{transform:`translate(${t.cs.x},${t.cs.y})`,"data-upset":"cs"},e.cs.v.map((s,i)=>a.a.createElement(mt,{key:e.cs.keys[i],d:s,h:r,className:r.hasClick||r.hasHover?"interactive-"+n.id:void 0,data:e,style:n,size:t},o&&o(s)))))}));function yt({data:e,size:t,style:n,elemOverlap:r,secondary:s,tooltip:o,suffix:i,transform:l,empty:c,combinationAddons:u}){const d=e.cs.bandWidth,m=t.cs.h+t.sets.h,f=t.cs.h,p=_e("fill"+i,!o&&"pnone-"+n.id,n.classNames.bar);return a.a.createElement("g",{transform:l,"data-upset":s?"cs-q":"cs-s"},e.cs.v.map((i,l)=>{const y=e.cs.x(i),h=e.cs.keys[l];if(c&&!s)return a.a.createElement("rect",{key:h,x:y,y:f,height:0,width:d,className:p,style:lt(n.styles.bar,n.selectionColor?void 0:i.color)},o&&a.a.createElement("title",null));const g=r(i);if(0===g)return null;const b=dt(g,e.cs.max,e.cs.y),v=o&&a.a.createElement("title",null,`${i.name} ∩ ${o}: ${g}`),x=s?a.a.createElement("path",{key:h,transform:`translate(${y}, ${b[0]})`,d:`M0,-1 l${d},0 l0,2 l${-d},0 L-${e.triangleSize},-${e.triangleSize} L-${e.triangleSize},${e.triangleSize} Z`,className:p,"data-i":l,"data-cardinality":g,style:lt(void 0,n.selectionColor?void 0:i.color)},v):b.map((t,r)=>{const s=r>0?Math.floor(e.cs.bandWidth*we[r-1]):0;return a.a.createElement("rect",{key:r,x:y+s,y:t,height:f-t,width:d-2*s,"data-i":r>0?null:l,"data-cardinality":r>0?null:g,className:_e(p,r<b.length-1&&`fillOverflow${b.length-1-r}-${n.id}`),style:lt(n.styles.bar,n.selectionColor?void 0:i.color)},v)}),S=it(m,t.cs.addonPadding),$=u.map(e=>{const t=S(e),r=e.render({set:i,width:d,height:e.size,theme:n.theme});return r?a.a.createElement("g",{key:e.name,transform:`translate(${y},${t})`},r):null}).filter(Boolean);return 0===$.length?x:a.a.createElement("g",{key:h},x,$)}))}function ht({data:e,size:t,style:n,elemOverlap:r,suffix:s,secondary:o,empty:i,tooltip:l,setAddons:c,transform:u}){const d=t.sets.w,m=t.sets.w+t.labels.w+t.cs.w,f=e.sets.bandWidth,p=_e("fill"+s,!l&&" pnone-"+n.id,n.classNames.bar);return a.a.createElement("g",{transform:u,"data-upset":o?"sets-q":"sets-s"},e.sets.v.map((s,u)=>{const y=e.sets.y(s),h=e.sets.keys[u];if(i&&!o)return a.a.createElement("rect",{key:h,x:d,y:y,width:0,height:f,className:p,style:lt(n.styles.bar,n.selectionColor?void 0:s.color)},n.tooltips&&l&&a.a.createElement("title",null));const g=r(s);if(0===g)return null;const b=dt(g,e.sets.max,e.sets.x),v=n.tooltips&&l&&a.a.createElement("title",null,`${s.name} ∩ ${l}: ${g}`),x=o?a.a.createElement("path",{key:h,transform:`translate(${b[0]}, ${y+f})`,d:`M1,0 l0,${-f} l-2,0 l0,${f} L-${e.triangleSize},${e.triangleSize} L${e.triangleSize},${e.triangleSize} Z`,"data-i":u,"data-cardinality":g,className:p,style:lt(void 0,n.selectionColor?void 0:s.color)},v):b.map((t,r)=>{const o=r>0?Math.floor(e.sets.bandWidth*we[r-1]):0;return a.a.createElement("rect",{key:r,"data-i":r>0?null:u,"data-cardinality":r>0?null:g,x:t,y:y+o,width:d-t,height:f-2*o,className:_e(p,r<b.length-1&&`fillOverflow${b.length-1-r}-${n.id}`),style:lt(n.styles.bar,n.selectionColor?void 0:s.color)},v)}),S=it(m,t.sets.addonPadding),$=c.map(e=>{const t=S(e),r=e.render({set:s,width:e.size,height:f,theme:n.theme});return r?a.a.createElement("g",{key:e.name,transform:`translate(${t},${y})`},r):null}).filter(Boolean);return 0===$.length?x:a.a.createElement("g",{key:h},x,$)}))}const gt=[],bt=a.a.memo((function({size:e,data:t,style:n,hasHover:s,secondary:o,queries:i}){const l=e.sets.addons.some(e=>null!=e.renderQuery)||e.cs.addons.some(e=>null!=e.renderQuery),c=Object(r.useMemo)(()=>i.map(e=>Object.assign(Object.assign({},e),{overlap:f(e,"intersection",t.toElemKey),elemOverlap:l?p(e,"intersection",t.toElemKey):null})),[i,l,t.toElemKey]);function u(e,t,n,r,a){return Object.assign(Object.assign({},e),{render:s=>{const o=r(s.set);return e.renderQuery?e.renderQuery(Object.assign({query:t,overlap:o,index:n,secondary:a},s)):null}})}return a.a.createElement("g",{className:s&&!o?"pnone-"+n.id:void 0},a.a.createElement("g",{transform:`translate(${e.sets.x},${e.sets.y})`},c.map((r,i)=>a.a.createElement(ht,{key:r.name,data:t,size:e,style:n,elemOverlap:r.overlap,suffix:`Q${i}-${t.id}`,secondary:o||i>0,tooltip:s&&!(o||i>0)?void 0:r.name,setAddons:0===e.sets.addons.length?gt:e.sets.addons.map((e,t)=>u(e,r,t,r.elemOverlap,o||t>0))}))),a.a.createElement("g",{transform:`translate(${e.cs.x},${e.cs.y})`},c.map((r,i)=>a.a.createElement(yt,{key:r.name,data:t,size:e,style:n,elemOverlap:r.overlap,suffix:`Q${i}-${t.id}`,secondary:o||i>0,tooltip:s&&!(o||i>0)?void 0:r.name,combinationAddons:0===e.cs.addons.length?gt:e.cs.addons.map((e,t)=>u(e,r,t,r.elemOverlap,o||t>0))}))))}));function vt({data:e,size:t,style:n,selection:r}){if(!r||"set"!==r.type||!e.sets.keys.includes(e.toKey(r)))return null;const s=r;return a.a.createElement("rect",{y:e.sets.y(s),width:t.labels.w+t.cs.w+t.sets.after,height:e.sets.bandWidth,className:"selectionHint-"+n.id})}function xt({data:e,size:t,style:n,selection:r}){const s=e.sets.bandWidth/2,o=e.cs.cx,i=e.r,l=t.sets.h+t.sets.after,c=e.cs.bandWidth;if(!r||"set"===r.type||!e.cs)return null;const u=r,d=e.cs.keys.indexOf(e.toKey(u));return d<0?null:a.a.createElement("g",{transform:`translate(${t.labels.w+e.cs.x(u)}, 0)`,"data-upset":"cs-ss","data-i":d},a.a.createElement("rect",{width:c,height:l,className:"selectionHint-"+n.id}),u.sets.size>1&&a.a.createElement("line",{x1:o,y1:e.sets.y(e.sets.v.find(t=>e.cs.has(u,t)))+s-(e.r-1),x2:o,y2:e.sets.y(e.sets.rv.find(t=>e.cs.has(u,t)))+s+(e.r-1),className:"upsetSelectionLine-"+e.id,style:lt(void 0,n.selectionColor?void 0:u.color,"stroke")}),e.sets.v.filter(t=>e.cs.has(u,t)).map(t=>a.a.createElement(ut,{key:e.toKey(t),r:1.1*i,cx:o,cy:e.sets.y(t)+s,name:n.tooltips?t.name:"",className:_e("fillSelection-"+n.id,"pnone-"+n.id,n.classNames.dot),style:lt(n.styles.dot,n.selectionColor?void 0:t.color)})))}const St=[];function $t({size:e,data:t,style:n,selection:r,hasHover:s}){const o=n.emptySelection,i=We(r,t.overlapGuesser,t.toElemKey),l=De(r),u=e.sets.addons.some(e=>null!=e.renderSelection)||e.cs.addons.some(e=>null!=e.renderSelection),d=r&&"function"!=typeof r&&u?function(e,t){const n=c(e,t);return e=>n(e.elems).intersection}(Array.isArray(r)?r:r.elems,t.toElemKey):null;function m(e){return Object.assign(Object.assign({},e),{render:t=>{const a=d?d(t.set):null;return e.renderSelection?e.renderSelection(Object.assign({selection:r,selectionColor:n.selectionColor||t.set.color||"orange",overlap:a},t)):null}})}return a.a.createElement("g",{className:s?"pnone-"+n.id:void 0},(r||o)&&a.a.createElement(yt,{data:t,size:e,style:n,transform:`translate(${e.cs.x},${e.cs.y})`,empty:o&&!r,elemOverlap:i,suffix:"Selection-"+n.id,tooltip:s?void 0:l,combinationAddons:0===e.cs.addons.length?St:e.cs.addons.map(m)}),(r||o)&&a.a.createElement(ht,{data:t,size:e,style:n,transform:`translate(${e.sets.x},${e.sets.y})`,empty:o&&!r,elemOverlap:i,suffix:"Selection-"+n.id,tooltip:s?void 0:l,setAddons:0===e.sets.addons.length?St:e.sets.addons.map(m)}),a.a.createElement("g",{transform:`translate(${e.labels.x},${e.labels.y})`},Ke(r)&&a.a.createElement(vt,{data:t,size:e,style:n,selection:r}),Ke(r)&&a.a.createElement(xt,{data:t,size:e,style:n,selection:r})))}function wt(e,t="font-size"){return e?`${t}: ${e};`:""}function Et(e,t,n,r){const a=[];t.hasSelectionColor&&a.push(`fill: ${t.hasSelectionColor};`);const s=null!=t.hasSelectionOpacity&&t.hasSelectionOpacity>=0;return s&&a.push(`fill-opacity: ${t.hasSelectionOpacity};`),{p:wt,root:`\n  .root-${e} {\n    ${wt(n,"font-family")}\n  }\n  `,text:`\n  .titleTextStyle-${e} {\n    fill: ${t.textColor};\n    ${wt(r.title)}\n  }\n  .descTextStyle-${e} {\n    fill: ${t.textColor};\n    ${wt(r.description)}\n  }\n\n  .legendTextStyle-${e} {\n    fill: ${t.textColor};\n    ${wt(r.legend)}\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  `,hasSFill:a.join(" "),hasSStroke:a.join(" ").replace("fill:","stroke:").replace("fill-","stroke-"),fill:`\n  .fillPrimary-${e} { fill: ${t.color}; fill-opacity: ${t.opacity}; }\n  .fillOverflow1-${e} { fill-opacity: ${t.opacity*$e[0]}; }\n  .fillOverflow2-${e} { fill-opacity: ${t.opacity*$e[1]}; }\n  ${a.length>0?`.root-${e}[data-selection] .fillPrimary-${e} { ${a.join(" ")} }`:""}\n  ${s?`\n      .root-${e}[data-selection] .fillOverflow1-${e} { fill-opacity: ${t.opacity*$e[0]}; }\n      .root-${e}[data-selection] .fillOverflow2-${e} { fill-opacity: ${t.opacity*$e[1]}; }`:""}\n  ${t.selectionColor?`.fillSelection-${e} { fill: ${t.selectionColor}; }`:""}\n  .fillTransparent-${e} { fill: transparent; }\n\n  .selectionHint-${e} {\n    fill: transparent;\n    pointer-events: none;\n    ${wt(t.selectionColor,"stroke")}\n  }\n  .clickAble-${e} {\n    cursor: pointer;\n  }\n\n  .startText-${e} {\n    text-anchor: start;\n  }\n  .endText-${e} {\n    text-anchor: end;\n  }\n  .pnone-${e} {\n    pointer-events: none;\n  }`,export:`\n  .exportTextStyle-${e} {\n    fill: ${t.textColor};\n    ${wt(r.exportLabel)}\n  }\n  .exportButtons-${e} {\n    text-anchor: middle;\n  }\n  .exportButton-${e} {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-${e}:hover {\n    opacity: 1;\n  }\n  .exportButton-${e} > rect {\n    fill: none;\n    stroke: ${t.textColor};\n  }\n  `}}function Ct(e){const t=e.onClick;return Object(r.useMemo)(()=>({hasClick:null!=t,hasHover:null!=e.onHover,onClick:ot(t),onMouseEnter:ot(e.onHover),onContextMenu:ot(e.onContextMenu),onMouseLeave:e.onHover?t=>e.onHover(null,t.nativeEvent,[]):void 0,onMouseMove:ot(e.onMouseMove),reset:e=>t?t(null,e.nativeEvent,[]):null}),[t,e.onHover,e.onContextMenu,e.onMouseMove])}const kt=a.a.forwardRef((function(e,t){var n;const s=Ae(e),{selection:o=null,queries:i=[],fontSizes:l}=s,c=Object(r.useMemo)(()=>s.id?s.id:He((s.fontFamily,l.axisTick,l.barLabel,l.chartLabel,l.legend,l.setLabel,l.title,l.exportLabel,l.description,s.textColor,s.hoverHintColor,s.color,s.hasSelectionColor,s.selectionColor,s.notMemberColor,s.alternatingBackgroundColor,s.opacity,s.hasSelectionOpacity)),[s.id,s.fontFamily,l.axisTick,l.barLabel,l.chartLabel,l.legend,l.setLabel,l.title,l.exportLabel,l.description,s.textColor,s.hoverHintColor,s.color,s.hasSelectionColor,s.selectionColor,s.notMemberColor,s.alternatingBackgroundColor,s.opacity,s.hasSelectionOpacity]),u=Object(r.useMemo)(()=>function(e,t,n,r,a,s,o,i,l,c,u,d,m,f,p){return{theme:e,styles:t,classNames:n,cs:{name:r,offset:a},sets:{name:s,offset:o},emptySelection:u,id:i,barLabelOffset:l,selectionColor:c,title:d,description:m,tooltips:f,setLabelAlignment:p}}(s.theme,s.styles,s.classNames,s.combinationName,s.combinationNameAxisOffset,s.setName,s.setNameAxisOffset,c,s.barLabelOffset,s.selectionColor,s.emptySelection,s.title,s.description,s.tooltips,s.setLabelAlignment),[s.theme,s.styles,s.classNames,s.barLabelOffset,s.combinationName,s.combinationNameAxisOffset,s.setName,s.setNameAxisOffset,c,s.selectionColor,s.emptySelection,s.title,s.description,s.tooltips,s.setLabelAlignment]),d=Object(r.useMemo)(()=>function(e,t,n,r,a,s,o,i,l,c,u){const d=o.reduce((e,t)=>e+("before"===t.position?t.size+c:0),0),m=o.reduce((e,t)=>e+("before"!==t.position?t.size+c:0),0),f=i.reduce((e,t)=>e+("before"===t.position?t.size+c:0),0),p=i.reduce((e,t)=>e+("before"!==t.position?t.size+c:0),0),y=t-2*n-20-p-f,h=e-2*n-d-m,g=a[0]>1?a[0]:h*a[0],b=a[1]>1?a[1]:h*a[1],v=s[0]>1?s[0]:y*s[0];return{id:l||He(),cs:{before:f,after:p,x:d+g+b,y:f,w:h-g-b,h:v,addons:i,addonPadding:u},labels:{x:d+g,y:f+v,w:b,h:y-v},sets:{before:d,after:m,x:d,y:f+v,w:g,h:y-v,addons:o,addonPadding:c},padding:r,legend:{x:e/2},margin:n,w:e,h:t}}(s.width,s.height,s.padding,s.barPadding,s.widthRatios,s.heightRatios,s.setAddons,s.combinationAddons,s.id,s.setAddonPadding,s.combinationAddonPadding),[s.width,s.height,s.padding,s.barPadding,s.widthRatios,s.heightRatios,s.setAddons,s.combinationAddons,s.id,s.setAddonPadding,s.combinationAddonPadding]),m=Object(r.useMemo)(()=>Ze(s.sets,s.combinations,d,s.numericScale,s.bandScale,s.barLabelOffset+Ve(l.barLabel),s.dotPadding,s.barPadding,Ve(l.axisTick),s.combinationAddons,s.toKey,s.toElemKey,s.id,s.setMaxScale,s.combinationMaxScale),[s.sets,s.combinations,d,s.numericScale,s.bandScale,s.barLabelOffset,l.barLabel,s.dotPadding,s.barPadding,l.axisTick,s.combinationAddons,s.toKey,s.toElemKey,s.id,s.setMaxScale,s.combinationMaxScale]),f=Et(c,s,s.fontFamily,l),p=Ct(s),y=`\n  ${f.root}\n  ${f.text}\n\n  .axisTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.axisTick)}\n    text-anchor: middle;\n  }\n  .barTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.barLabel)}\n  }\n  .cBarTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.barLabel)}\n    text-anchor: middle;\n  }\n  .sBarTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.barLabel)}\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-${c} {\n    ${f.p(l.barLabel)}\n    fill: ${s.hoverHintColor};\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.setLabel)}\n    text-anchor: ${function(e){var t;return null!==(t={left:"start",center:"middle",right:"end"}[e])&&void 0!==t?t:"middle"}(s.setLabelAlignment)};\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.chartLabel)}\n    text-anchor: middle;\n  }\n  .sChartTextStyle-${c} {\n    fill: ${s.textColor};\n    ${f.p(l.chartLabel)}\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n\n  ${f.fill}\n  .fillNotMember-${c} { fill: ${s.notMemberColor}; }\n  .fillAlternating-${c} { fill: ${s.alternatingBackgroundColor||"transparent"}; }\n\n  .axisLine-${c} {\n    fill: none;\n    stroke: ${s.textColor};\n  }\n  .hoverBar-${c} {\n    fill: transparent;\n  }\n\n  .interactive-${c}:hover > .hoverBar-${c} {\n    stroke: ${s.hoverHintColor};\n  }\n  .interactive-${c}:hover > .hoverBarTextStyle-${c} {\n    display: unset;\n  }\n\n  ${f.export}\n\n  .upsetLine-${m.id} {\n    stroke-width: ${.6*m.r};\n    stroke: ${s.color};\n    stroke-opacity: ${s.opacity};\n  }\n  ${f.hasSStroke?`.root-${c}[data-selection] .upsetLine-${m.id} { ${f.hasSStroke} }`:""}\n\n  .upsetSelectionLine-${m.id} {\n    stroke-width: ${.6*m.r*1.1};\n    ${f.p(s.selectionColor,"stroke")}\n    pointer-events: none;\n  }\n\n  ${i.map((e,t)=>`.fillQ${t}-${m.id} {\n    fill: ${e.color};\n  }`).join("\n")}\n  `,h=Object(r.useCallback)(t=>{const n=t.currentTarget.closest("svg"),r=t.currentTarget.dataset.type||"png";switch(r){case"vega":ze(n);break;case"dump":Be(n,e,m);break;case"share":Re(e,m);break;case"svg":case"png":Le(n,{type:r,toRemove:"."+t.currentTarget.getAttribute("class")})}},[m,e]),g=De(o);return a.a.createElement("svg",{id:s.id,className:_e("root-"+c,s.className),style:s.style,width:s.width,height:s.height,ref:t,viewBox:`0 0 ${s.width} ${s.height}`,"data-theme":null!==(n=s.theme)&&void 0!==n?n:"light","data-selection":g||void 0},a.a.createElement("style",null,y),a.a.createElement("defs",null,a.a.createElement("clipPath",{id:"clip-"+d.id},a.a.createElement("rect",{x:d.sets.w,y:0,width:d.labels.w,height:d.sets.h}))),s.queryLegend&&a.a.createElement(Ye,{queries:i,x:d.legend.x,style:u,data:m}),a.a.createElement(Xe,{transform:`translate(${d.w-2},${d.h-3})`,styleId:c,exportButtons:s.exportButtons,exportChart:h}),a.a.createElement("g",{transform:`translate(${s.padding},${s.padding})`,"data-upset":"base"},s.onClick&&a.a.createElement("rect",{width:d.cs.x,height:d.sets.y,onClick:p.reset,className:"fillTransparent-"+c}),a.a.createElement(ct,{size:d,style:u,data:m}),a.a.createElement(pt,{size:d,style:u,data:m,h:p,setChildrenFactory:s.setChildrenFactory,combinationChildrenFactory:s.combinationChildrenFactory}),a.a.createElement($t,{size:d,style:u,data:m,hasHover:p.hasHover,selection:o}),a.a.createElement(bt,{size:d,style:u,data:m,hasHover:p.hasHover,queries:i,secondary:null!=s.onHover||null!=o})),e.children)}));Math.PI;var Ot=kt;function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var a=qt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return It(e)}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(o,e);var t,n,r,s=Pt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=s.call(this,e)).state={selection:null},t.renderPlot=t.renderPlot.bind(It(t)),t._renderPlotCalled=!1,t.setSelection=t.setSelection.bind(It(t)),t}return t=o,(n=[{key:"setSelection",value:function(e){console.log(e),this.setState({selection:e}),this.props.setProps({selection:e})}},{key:"componentDidMount",value:function(){this.props.selection&&this.setState({selection:this.props.selection})}},{key:"componentWillUnmount",value:function(){this.setState({selection:null})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.data,r=e.height,s=e.width,o=e.title,i=e.theme,l=e.interaction,c=e.setLabelSize,u=e.setName,d=e.combinationName,m=e.colors,f=I(n),p=f.sets,y=f.combinations;return p.sort((function(e,t){return e.cardinality-t.cardinality})),y.sort((function(e,t){return t.cardinality-e.cardinality})),void 0!==m&&(p=p.map((function(e,t){return Mt(Mt({},e),{},{color:m[t%m.length]})})),y=y.map((function(e,t){return Mt(Mt({},e),{},{color:m[t%m.length]})}))),"hover"===l?a.a.createElement("div",{id:t},a.a.createElement(Ot,{sets:p,combinations:y,selection:this.state.selection,onHover:this.setSelection,width:s,height:r,title:o,theme:i,setName:u,fontSizes:{setLabel:c},combinationName:d})):a.a.createElement("div",{id:t},a.a.createElement(Ot,{sets:p,combinations:y,selection:this.state.selection,onClick:this.setSelection,width:s,height:r,title:o,theme:i,setName:u,fontSizes:{setLabel:c},combinationName:d}))}},{key:"renderPlot",value:function(e){var t=this.props,n=t.id;t.setProps,t.data,e===this._up&&this._renderPlotCalled||(this._up=e,this._renderPlotCalled=!0,d3.select("."+n))}}])&&jt(t.prototype,n),r&&jt(t,r),o}(r.Component);Bt.defaultProps={width:800,height:500,title:null,data:[],theme:"light",interaction:"hover",setLabelSize:"10px",setName:"Intersection Size"},Bt.propTypes={id:o.a.string,data:o.a.arrayOf(o.a.shape({name:o.a.string.isRequired,sets:o.a.arrayOf(o.a.string).isRequired})),selection:o.a.object,setProps:o.a.func,width:o.a.number,height:o.a.number,title:o.a.string,theme:o.a.string,interaction:o.a.string,setName:o.a.string,setLabelSize:o.a.string,combinationName:o.a.string,colors:o.a.arrayOf(o.a.string)},n.d(t,"UpsetJS",(function(){return Bt}))}]);
//# sourceMappingURL=dash_upsetjs.min.js.map
//# sourceMappingURL=dash_upsetjs.min.js.map